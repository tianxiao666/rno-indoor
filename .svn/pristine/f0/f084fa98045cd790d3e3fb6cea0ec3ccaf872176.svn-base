<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="jquerybbq/jquery.bbq.min.js"></script>
	<script type="text/javascript" src="../../../../lib/jquery-plugins/jquery.form-3.2.0.js"></script>
	<script>
        var env = env || {};
        env.include = true;

        var urldata = $.deparam.querystring(true);
        if (!$.isEmptyObject(urldata)) {
            $.each(urldata,function (k,v) {
                if("buildingId"==k){
                    env.BUILDING_ID = v;
                }
                if("floorId"==k){
                    env.FLOOR_ID = v;
                }
                if("drawMapId"==k){
                    env.DRAW_MAP_ID = v;
                }
                if("flag"==k){
                    env.FLAG = v;
                }
            })
        }
        $.ajax({
            url: "/api/dm-plane-Layer-data/render-svg-interface",
            data:{
                'buildingId':env.BUILDING_ID,
                'floorId':env.FLOOR_ID,
                'drawMapId':env.DRAW_MAP_ID
            } ,
            dataType: "json",
            type:'POST',
            async: false,
            success: function (data) {
                env.BUILDING_NAME = data['BUILDING_NAME'];
                env.floorData = data.floorList;
                $("#floorWidth").val(data.FLOOR_WIDTH);
                $("#floorheight").val(data.FLOOR_HEIGHT);
                env.FLOOR_WIDTH = parseFloat(data.FLOOR_WIDTH);
                if ((!!!env.FLOOR_WIDTH) || isNaN(env.FLOOR_WIDTH)) {
                    env.FLOOR_WIDTH = 96;
                }
                env.FLOOR_HEIGHT = parseFloat(data.FLOOR_HEIGHT);
                if ((!!!env.FLOOR_HEIGHT) || isNaN(env.FLOOR_HEIGHT)) {
                    env.FLOOR_HEIGHT = 72;
                }
                env.typeJson = data.typeJson;
                env.DEFAULT_PLANEGRAPH = data.DEFAULT_PLANEGRAPH;
                env.ViewBoxWidth = Math.round(env.FLOOR_WIDTH / env.DEFAULT_PLANEGRAPH.DW_SCALE);
                env.ViewBoxHeight = Math.round(env.FLOOR_HEIGHT / env.DEFAULT_PLANEGRAPH.DW_SCALE);
                env.svgeditoffset = 0;
                env.SVG_LAYER_TYPE = data.SVG_LAYER_TYPE;
                env.isFullScreen = false;

                var POIFORMLISTJSONSTR = data.POIFORMLISTJSONSTR;
                if (POIFORMLISTJSONSTR != "") {
                    env.PoiFormListJson = POIFORMLISTJSONSTR;
                }
                else {
                    env.PoiFormListJson = {};
                }
                var APFORMLISTJSONSTR = data.APFORMLISTJSONSTR;
                if (APFORMLISTJSONSTR != "") {
                    env.ApFormListJson = APFORMLISTJSONSTR;
                }
                else {
                    env.ApFormListJson = {};
                }
                var SVGPICLISTJSONSTR = data.SVGPICLISTJSONSTR;
                if (SVGPICLISTJSONSTR != "") {
                    env.SvgPicListJson = SVGPICLISTJSONSTR;
                }
                else {
                    env.SvgPicListJson = {};
                }

            },error:function (err) {
                console.log("err="+err);
            }
        });
	</script>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1"/>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<link rel="icon" type="image/png" href="images/logo.png"/>
<link rel="stylesheet" href="jgraduate/css/jPicker.css" type="text/css"/>
<link rel="stylesheet" href="jgraduate/css/jgraduate.css" type="text/css"/>
<link rel="stylesheet" href="svg-editor.css" type="text/css"/>
<link rel="stylesheet" href="spinbtn/JQuerySpinBtn.css" type="text/css"/>

<script type="text/javascript" src="js-hotkeys/jquery.hotkeys.min.js"></script>
<script type="text/javascript" src="jquerybbq/jquery.bbq.min.js"></script>
<script type="text/javascript" src="svgicons/jquery.svgicons.js"></script>
<script type="text/javascript" src="jgraduate/jquery.jgraduate.min.js"></script>
<script type="text/javascript" src="spinbtn/JQuerySpinBtn.min.js"></script>
<script type="text/javascript" src="touch.js"></script>

  <script type="text/javascript" src="svgedit.compiled.js"></script>

<script type="text/javascript" src="jquery-ui/jquery-ui-1.8.17.custom.min.js"></script>
<script type="text/javascript" src="jgraduate/jpicker.js"></script>

<!-- feeds -->
<link rel="alternate" type="application/atom+xml" title="SVG-edit General Discussion" href="http://groups.google.com/group/svg-edit/feed/atom_v1_0_msgs.xml" />
<link rel="alternate" type="application/atom+xml" title="SVG-edit Updates (Issues/Fixes/Commits)" href="http://code.google.com/feeds/p/svg-edit/updates/basic" />

	<script language="javascript" type="text/javascript" src="edit-drawing-plan.js"></script>
	<link href="edit-drawing-plan.css" rel="stylesheet" type="text/css">
<!-- Add script with custom handlers here -->
	<link rel="stylesheet" href="../../css/header.css">
	<script src="svgcanvas.js"></script>
	<script src="draw.js"></script>

	<script src="canvg/canvg.js"></script>
<title>SVG-edit</title>

</head>
<body>
<div class="content">
	<input id="DRAW_MAP_ID" value="" autocomplete="off" type="hidden">
	<div class="crumb">
		<span>当前位置：<a href="../../../place-management/place-management.html">场所管理</a></span>&nbsp;&gt;&nbsp;<a id="BuildingFloorMrg_ID" href="../../../floor-management/floor-management.html"><span>楼层管理</span></a>&nbsp;&gt;&nbsp;<a id="BuildingFloorPlanegraphMgr_ID" href="../../floor-plan-management.html">楼层平面图管理</a>
	</div>
</div>
<input id="floorHeight" hidden="hidden" value="">
<input id="floorWidth" hidden="hidden" value="">
<div id="svgeditdiv" style=" width:100%;position:absolute;background-color: #A0A0A0;">
	<!--引入svg-->
	<!-- Add script with custom handlers here --><title>SVG-edit</title>
	<div id="svg_editor">
		<div id="rulers">
			<div id="ruler_corner">
			</div>
			<div id="ruler_x">
				<div>
					<canvas height="15">
					</canvas>
				</div>
			</div>
			<div id="ruler_y">
				<div>
					<canvas width="15">
					</canvas>
				</div>
			</div>
		</div>
		<div id="workarea">
			<style id="styleoverrides" type="text/css" media="screen" scoped="scoped">
			</style>
			<div id="svgcanvas" style="position:relative">
			</div>
		</div>
		<div id="sidepanels">
			<div id="layerpanel">
				<input type="button" id="fullscreenbutton" onclick="togglefullscreen();" style="width:190px;height:30px;font-size:12px;display:none;" value="全屏"></input>
				<div style="width:178px;margin-bottom:4px;margin-top:4px;font-size:small;white-space:nowrap;overflow:hidden;">
					<span>场所：</span>
					<span id="BUILDING_NAME"></span>
				</div>
				<div style="margin-bottom:10px;margin-top:4px;font-size:small;">
					<span>楼层：</span>
					<select id = "FLOOR_ID" style="width:135px;" class = "floorListcls">
					<option value="">--请选择--</option>
					</select>
				</div>
				<div style="margin-bottom:4px;margin-top:4px;font-size:small;">
					<span>标题：</span>
					<input type="text" style="width:130px" id="DM_TOPIC">
					</input>
				</div>
				<table id="layerbuttons">
					<tr>
						<td>
							<div id="layer_new" class="layer_button" title="新增图层">
							</div>
						</td>
						<td>
							<div id="layer_up" class="layer_button" title="图层上移">
							</div>
						</td>
						<td>
							<div id="layer_down" class="layer_button" title="图层下移">
							</div>
						</td>
					</tr>
				</table>
				<input id="SVG_VIEWBOX_WIDTH" type="hidden" value="">
				</input>
				<input id="SVG_VIEWBOX_HEIGHT" type="hidden" value="">
				</input>
				<input id="SVG_VIEWBOX_BACKGROUNDCOLOR" type="hidden" value="">
				</input>
				<input id="SVG_DW_UNIT" type="hidden" value="">
				</input>
				<div id="SVG_EYE_DEFS" style="height:0px;width:0px"></div>
				<div id="layerlistdiv" style="width:197px;height:280px;overflow:auto;margin-bottom:10px;margin-top:5px;background-color:#ffffff;">
					<table id="layerlist">
						<tr class="layer">
							<td class="layername">
								图层 1
							</td>
							<td class="layertype">
							</td>
							<td class="layervis">
							</td>
							<td class="layerdelete">
							</td>
						</tr>
					</table>
				</div>
				<span id="selLayerLabel">元素移动:</span>
				<select id="selLayerNames" title="将选中的元素移动到不同的图层" disabled="disabled">
					<option selected="selected" value="layer1">Layer 1</option>
				</select>
				<div align="center">
					<button style="margin-top:10px;width:150px;height:35px;font-size:medium;" onclick="saveSvg();"><span>保&nbsp;存&nbsp;图&nbsp;片</span></button>
				</div>
			</div>
			<div id="sidepanel_handle" title="显示/隐藏图层管理菜单[X]">
				图 层 管 理
			</div>
		</div>
		<div id="main_button">
			<div id="tool_save" class="tool_button" title="保存图片" style="width:90px">
				<div style="float:left"></div>
				<span style="">&nbsp;保&nbsp;&nbsp;存</span>
			</div>
		</div>
		<div id="tools_top" class="tools_panel">
			<div id="editor_panel">
				<div class="tool_sep">
				</div>
				<div class="push_button" id="tool_source" title="源代码[U]">
				</div>
				<div class="tool_button" id="tool_wireframe" title="线框模式[F]">
				</div>
			</div>
			<!-- History buttons -->
			<div id="history_panel">
				<div class="tool_sep">
				</div>
				<div class="push_button tool_button_disabled" id="tool_undo" title="撤消[Z]">
				</div>
				<div class="push_button tool_button_disabled" id="tool_redo" title="恢复[Y]">
				</div>
			</div>
			<!-- Buttons when a single element is selected -->
			<div id="selected_panel">
				<div class="toolset">
					<div class="tool_sep">
					</div>
					<div class="push_button" id="tool_clone" title="复制元素[D]">
					</div>
					<div class="push_button" id="tool_delete" title="删除元素[Delete/Backspace]">
					</div>
					<div class="tool_sep">
					</div>
					<div class="push_button" id="tool_move_top" title="置为顶层[ Ctrl+Shift+] ]">
					</div>
					<div class="push_button" id="tool_move_bottom" title="置为底层[ Ctrl+Shift+[ ]">
					</div>
					<div class="push_button" id="tool_topath" title="转换为路径（不能恢复）">
					</div>
					<div class="push_button" id="tool_reorient" title="调整路径">
					</div>
					<div class="push_button" id="tool_make_link" title="建立(超级)链接">
					</div>
					<div class="tool_sep">
					</div>
					<label id="idLabel" title="元素ID" style="display:none;">
						<span>id:</span>
						<input id="elem_id" class="attr_changer" data-attr="id" size="10" type="text"/>
					</label>
				</div>
				<label id="tool_angle" title="改变旋转角度" class="toolset">
					<span id="angleLabel" class="icon_label"></span>
					<input id="angle" size="2" value="0" type="text"/>
				</label>
				<div class="toolset" id="tool_blur" title="改变模糊值" style="display:none">
					<label>
						<span id="blurLabel" class="icon_label"></span>
						<input id="blur" size="2" value="0" type="text"/>
					</label>
					<div id="blur_dropdown" class="dropdown">
						<button>
						</button>
						<ul>
							<li class="special">
								<div id="blur_slider">
								</div>
							</li>
						</ul>
					</div>
				</div>
				<div class="dropdown toolset" id="tool_position" title="元素位置">
					<div id="cur_position" class="icon_label">
					</div>
					<button>
					</button>
				</div>
				<div id="xy_panel" class="toolset">
					<label>
						x: <input id="selected_x" class="attr_changer" title="改变X坐标" size="3" data-attr="x"/>
					</label>
					<label>
						y: <input id="selected_y" class="attr_changer" title="改变Y坐标" size="3" data-attr="y"/>
					</label>
				</div>
			</div><!-- Buttons when multiple elements are selected -->
			<div id="multiselected_panel">
				<div class="tool_sep">
				</div>
				<div class="push_button" id="tool_clone_multi" title="克隆元素[C]">
				</div>
				<div class="push_button" id="tool_delete_multi" title="删除选中的元素[Delete/Backspace]">
				</div>
				<div class="tool_sep">
				</div>
				<div class="push_button" id="tool_group" title="组合元素[G]" style="display:none">
				</div>
				<div class="push_button" id="tool_make_link_multi" title="建立(超级)链接" style="display:none">
				</div>
				<div class="push_button" id="tool_alignleft" title="左对齐">
				</div>
				<div class="push_button" id="tool_aligncenter" title="居中">
				</div>
				<div class="push_button" id="tool_alignright" title="右对齐">
				</div>
				<div class="push_button" id="tool_aligntop" title="顶部对齐">
				</div>
				<div class="push_button" id="tool_alignmiddle" title="中部对齐">
				</div>
				<div class="push_button" id="tool_alignbottom" title="底部对齐">
				</div>
				<label id="tool_align_relative">
					<span id="relativeToLabel">relative to:</span>
					<select id="align_relative_to" title="Align relative to ...">
						<option id="selected_objects" value="selected">selected objects</option>
						<option id="largest_object" value="largest">largest object</option>
						<option id="smallest_object" value="smallest">smallest object</option>
						<option id="page" value="page">page</option>
					</select>
				</label>
				<div class="tool_sep">
				</div>
			</div>
			<div id="rect_panel">
				<div class="toolset">
					<label id="rect_width_tool" title="改变矩形的宽度">
						<span id="rwidthLabel" class="icon_label"></span>
						<input id="rect_width" class="attr_changer" size="3" data-attr="width"/>
					</label>
					<label id="rect_height_tool" title="改变矩形的高度">
						<span id="rheightLabel" class="icon_label"></span>
						<input id="rect_height" class="attr_changer" size="3" data-attr="height"/>
					</label>
				</div>
				<label id="cornerRadiusLabel" title="改变矩形圆角半径" class="toolset">
					<span class="icon_label"></span>
					<input id="rect_rx" size="3" value="0" type="text" data-attr="Corner Radius"/>
				</label>
			</div>
			<div id="image_panel">
				<div class="toolset">
					<label>
						<span id="iwidthLabel" class="icon_label"></span>
						<input id="image_width" class="attr_changer" title="改变图像宽度" size="3" data-attr="width"/>
					</label>
					<label>
						<span id="iheightLabel" class="icon_label"></span>
						<input id="image_height" class="attr_changer" title="改变形象高度" size="3" data-attr="height"/>
					</label>
				</div>
				<div class="toolset">
					<label id="tool_image_url">
						url:<input id="image_url" type="text" title="改变URL" size="35"/>
					</label>
					<label id="tool_change_image">
						<button id="change_image_url" style="display:none;">
							Change Image
						</button>
						<span id="url_notice" title="NOTE: This image cannot be embedded. It will depend on this path to be displayed"></span>
					</label>
				</div>
			</div>
			<div id="circle_panel">
				<div class="toolset">
					<label id="tool_circle_cx">
						cx:<input id="circle_cx" class="attr_changer" title="改变圆圆心的x坐标" size="3" data-attr="cx"/>
					</label>
					<label id="tool_circle_cy">
						cy:<input id="circle_cy" class="attr_changer" title="改变圆圆心的y坐标" size="3" data-attr="cy"/>
					</label>
				</div>
				<div class="toolset">
					<label id="tool_circle_r">
						r:<input id="circle_r" class="attr_changer" title="改变圆的半径" size="3" data-attr="r"/>
					</label>
				</div>
			</div>
			<div id="ellipse_panel">
				<div class="toolset">
					<label id="tool_ellipse_cx">
						cx:<input id="ellipse_cx" class="attr_changer" title="改变椭圆圆心的x坐标" size="3" data-attr="cx"/>
					</label>
					<label id="tool_ellipse_cy">
						cy:<input id="ellipse_cy" class="attr_changer" title="改变椭圆圆心的y坐标" size="3" data-attr="cy"/>
					</label>
				</div>
				<div class="toolset">
					<label id="tool_ellipse_rx">
						rx:<input id="ellipse_rx" class="attr_changer" title="改变椭圆x半径" size="3" data-attr="rx"/>
					</label>
					<label id="tool_ellipse_ry">
						ry:<input id="ellipse_ry" class="attr_changer" title="改变椭圆y半径" size="3" data-attr="ry"/>
					</label>
				</div>
			</div>
			<div id="line_panel">
				<div class="toolset">
					<label id="tool_line_x1">
						x1:<input id="line_x1" class="attr_changer" title="改变线的起始x坐标" size="3" data-attr="x1"/>
					</label>
					<label id="tool_line_y1">
						y1:<input id="line_y1" class="attr_changer" title="改变线的起始y坐标" size="3" data-attr="y1"/>
					</label>
				</div>
				<div class="toolset">
					<label id="tool_line_x2">
						x2:<input id="line_x2" class="attr_changer" title="改变线的结束x坐标" size="3" data-attr="x2"/>
					</label>
					<label id="tool_line_y2">
						y2:<input id="line_y2" class="attr_changer" title="改变线的结束y坐标" size="3" data-attr="y2"/>
					</label>
				</div>
			</div>
			<div id="text_panel">
				<div class="toolset">
					<div class="tool_button" id="tool_bold" title="粗体[B]">
						<span></span>B
					</div>
					<div class="tool_button" id="tool_italic" title="斜体[I]">
						<span></span>i
					</div>
				</div>
				<div class="toolset" id="tool_font_family">
					<label>
						<!-- Font family --><input id="font_family" type="text" title="改变字体类型" size="12"/>
					</label>
					<div id="font_family_dropdown" class="dropdown">
						<button>
						</button>
						<ul>
							<li style="font-family:serif">Serif</li>
							<li style="font-family:sans-serif">Sans-serif</li>
							<li style="font-family:cursive">Cursive</li>
							<li style="font-family:fantasy">Fantasy</li>
							<li style="font-family:monospace">Monospace</li>
						</ul>
					</div>
				</div>
				<label id="tool_font_size" title="改变字体大小">
					<span id="font_sizeLabel" class="icon_label"></span>
					<input id="font_size" size="3" value="0" type="text"/>
				</label><!-- Not visible, but still used --><input id="text" type="text" size="35"/>
			</div><!-- formerly gsvg_panel -->
			<div id="container_panel">
				<div class="tool_sep">
				</div>
				<!-- Add viewBox field here? -->
				<label id="group_title" title="Group identification label">
					<span>label:</span>
					<input id="g_title" data-attr="title" size="10" type="text"/>
				</label>
			</div>
			<div id="use_panel">
				<div class="push_button" id="tool_unlink_use" title="Break link to reference element (make unique)">
				</div>
			</div>
			<div id="g_panel">
				<div class="push_button" id="tool_ungroup" title="Ungroup Elements [G]">
				</div>
			</div>
			<!-- For anchor elements -->
			<div id="a_panel">
				<label id="tool_link_url" title="Set link URL (leave empty to remove)">
					<span id="linkLabel" class="icon_label"></span>
					<input id="link_url" type="text" size="35"/>
				</label>
			</div>
			<div id="path_node_panel">
				<div class="tool_sep">
				</div>
				<div class="tool_button push_button_pressed" id="tool_node_link" title="Link Control Points">
				</div>
				<div class="tool_sep">
				</div>
				<label id="tool_node_x">
					x:<input id="path_node_x" class="attr_changer" title="改变节点的x坐标" size="3" data-attr="x"/>
				</label>
				<label id="tool_node_y">
					y:<input id="path_node_y" class="attr_changer" title="改变节点的y坐标" size="3" data-attr="y"/>
				</label>
				<select id="seg_type" title="Change Segment type">
					<option id="straight_segments" selected="selected" value="4">Straight</option>
					<option id="curve_segments" value="6">Curve</option>
				</select>
				<div class="tool_button" id="tool_node_clone" title="克隆节点">
				</div>
				<div class="tool_button" id="tool_node_delete" title="删除节点">
				</div>
				<div class="tool_button" id="tool_openclose_path" title="Open/close sub path">
				</div>
				<div class="tool_button" id="tool_add_subpath" title="Add sub-path">
				</div>
			</div>
		</div>
		<!-- tools_top -->
		<div id="cur_context_panel">
		</div>
		<ul id="tools_left" class="tools_panel">
			<li class="tool_button" id="tool_select" title="选择工具">
			</li>
			<li class="tool_button" id="tool_fhpath" title="铅笔工具">
			</li>
			<li class="tool_button" id="tool_line" title="线段工具">
			</li>
			<li class="tool_button flyout_current" id="tools_rect_show" title="正方形/矩形工具">
				<div class="flyout_arrow_horiz">
				</div>
			</li>
			<li class="tool_button flyout_current" id="tools_ellipse_show" title="椭圆/圆工具">
				<div class="flyout_arrow_horiz">
				</div>
			</li>
			<li class="tool_button" id="tool_path" title="路径工具">
			</li>
			<li class="tool_button" id="tool_text" title="文本工具">
			</li>
			<li class="tool_button" id="tool_image" title="图像工具">
			</li>
			<li class="tool_button" id="tool_zoom" title="缩放工具[Ctrl+Up/Down]">
			</li>
			<div style="display: none">
				<div id="tool_rect" title="矩形">
				</div>
				<div id="tool_square" title="正方形">
				</div>
				<div id="tool_fhrect" title="铅笔构造矩形">
				</div>
				<div id="tool_ellipse" title="椭圆">
				</div>
				<div id="tool_circle" title="圆">
				</div>
				<div id="tool_fhellipse" title="铅笔构造椭圆">
				</div>
			</div>
		</ul>
		<!-- tools_left -->
		<div id="tools_bottom" class="tools_panel">
			<!-- Zoom buttons -->
			<div id="zoom_panel" class="toolset" title="改变缩放级别">
				<label>
					<span id="zoomLabel" class="zoom_tool icon_label"></span>
					<input id="zoom" size="3" value="100" type="text" />
				</label>
				<div id="zoom_dropdown" class="dropdown">
					<button>
					</button>
					<ul>
						<li>
							1000%
						</li>
						<li>
							400%
						</li>
						<li>
							200%
						</li>
						<li>
							100%
						</li>
						<li>
							50%
						</li>
						<li>
							25%
						</li>
						<li id="fit_to_canvas" data-val="canvas">
							Fit to canvas
						</li>
						<li id="fit_to_sel" data-val="selection">
							Fit to selection
						</li>
						<li id="fit_to_layer_content" data-val="layer">
							Fit to layer content
						</li>
						<li id="fit_to_all" data-val="content">
							Fit to all content
						</li>
						<li>
							100%
						</li>
					</ul>
				</div>
				<div class="tool_sep">
				</div>
			</div>
			<div id="tools_bottom_2">
				<div id="color_tools">
					<div class="color_tool" id="tool_fill">
						<label class="icon_label" for="fill_color" title="改变填充颜色">
						</label>
						<div class="color_block">
							<div id="fill_bg">
							</div>
							<div id="fill_color" class="color_block">
							</div>
						</div>
					</div>
					<div class="color_tool" id="tool_stroke">
						<label class="icon_label" title="改变画笔颜色">
						</label>
						<div class="color_block">
							<div id="stroke_bg">
							</div>
							<div id="stroke_color" class="color_block" title="改变画笔颜色">
							</div>
						</div>
						<label class="stroke_label">
							<input id="stroke_width" title="改变画笔宽度1,Shift改变画笔宽度0.1" size="2" value="5" type="text" data-attr="Stroke Width"/>
						</label>
						<div id="toggle_stroke_tools" title="显示/隐藏更多画笔的工具">
						</div>
						<label class="stroke_tool">
							<select id="stroke_style" title="改变画笔样式">
								<option selected="selected" value="none">&mdash;</option>
								<option value="2,2">...</option>
								<option value="5,5">- -</option>
								<option value="5,2,2,2">- .</option>
								<option value="5,2,2,2,2,2">- ..</option>
							</select>
						</label>
						<div class="stroke_tool dropdown" id="stroke_linejoin">
							<div id="cur_linejoin" title="斜接交点">
							</div>
							<button>
							</button>
						</div>
						<div class="stroke_tool dropdown" id="stroke_linecap">
							<div id="cur_linecap" title="结束线帽">
							</div>
							<button>
							</button>
						</div>
					</div>
					<div class="color_tool" id="tool_opacity" title="改变不透明度">
						<label>
							<span id="group_opacityLabel" class="icon_label"></span>
							<input id="group_opacity" size="3" value="100" type="text"/>
						</label>
						<div id="opacity_dropdown" class="dropdown">
							<button>
							</button>
							<ul>
								<li>
									0%
								</li>
								<li>
									25%
								</li>
								<li>
									50%
								</li>
								<li>
									75%
								</li>
								<li>
									100%
								</li>
								<li class="special">
									<div id="opac_slider">
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div id="tools_bottom_3">
				<div id="palette_holder">
					<div id="palette" title="点击改变填充颜色,Shift改变画笔颜色">
					</div>
				</div>
			</div>
			<!-- <div id="copyright"><span id="copyrightLabel">Powered by</span> <a href="http://svg-edit.googlecode.com/" target="_blank">SVG-edit v2.6-beta</a></div> -->
		</div>
		<div id="option_lists" class="dropdown">
			<ul id="linejoin_opts">
				<li class="tool_button current" id="linejoin_miter" title="Linejoin: Miter">
				</li>
				<li class="tool_button" id="linejoin_round" title="Linejoin: Round">
				</li>
				<li class="tool_button" id="linejoin_bevel" title="Linejoin: Bevel">
				</li>
			</ul>
			<ul id="linecap_opts">
				<li class="tool_button current" id="linecap_butt" title="Linecap: Butt">
				</li>
				<li class="tool_button" id="linecap_square" title="Linecap: Square">
				</li>
				<li class="tool_button" id="linecap_round" title="Linecap: Round">
				</li>
			</ul>
			<ul id="position_opts" class="optcols3">
				<li class="push_button" id="tool_posleft" title="左对齐">
				</li>
				<li class="push_button" id="tool_poscenter" title="居中">
				</li>
				<li class="push_button" id="tool_posright" title="右对齐">
				</li>
				<li class="push_button" id="tool_postop" title="顶部对齐">
				</li>
				<li class="push_button" id="tool_posmiddle" title="中部对齐">
				</li>
				<li class="push_button" id="tool_posbottom" title="底部对齐">
				</li>
			</ul>
		</div>
		<!-- hidden divs -->
		<div id="color_picker">
		</div>
	</div>
	<!-- svg_editor -->
	<div id="svg_source_editor">
		<div id="svg_source_overlay">
		</div>
		<div id="svg_source_container">
			<div id="tool_source_back" class="toolbar_button">
				<button id="tool_source_save">
					Apply Changes
				</button>
				<button id="tool_source_cancel">
					Cancel
				</button>
			</div>
			<div id="save_output_btns">
				<p id="copy_save_note">
					Copy the contents of this box into a text editor, then save the file with a .svg extension.
				</p>
				<button id="copy_save_done">
					Done
				</button>
			</div>
			<form>
                    <textarea id="svg_source_textarea" spellcheck="false">
                    </textarea>
			</form>
		</div>
	</div>
	<div id="svg_docprops">
		<div id="svg_docprops_overlay">
		</div>
		<div id="svg_docprops_container">
			<div id="tool_docprops_back" class="toolbar_button">
				<button id="tool_docprops_save">
					确定
				</button>
				<button id="tool_docprops_cancel">
					取消
				</button>
			</div>
			<fieldset id="svg_docprops_docprops">
				<legend id="svginfo_image_props">
					图形属性
				</legend>
				<label>
					<span id="svginfo_title">Title:</span>
					<input type="text" id="canvas_title"/>
				</label>
				<div id="change_resolution_div" >
					<fieldset id="change_resolution">
						<legend id="svginfo_dim">
							画布尺寸
						</legend>
						<label>
							<span id="svginfo_width">width:</span>
							<input type="text" id="canvas_width" size="6"/>
						</label>
						<label>
							<span id="svginfo_height">height:</span>
							<input type="text" id="canvas_height" size="6"/>
						</label>
						<label>
							<select id="resolution">
								<option id="selectedPredefined" selected="selected">Select predefined:</option>
								<option>640x480</option>
								<option>800x600</option>
								<option>1024x768</option>
								<option>1280x960</option>
								<option>1600x1200</option>
								<option id="fitToContent" value="content">Fit to Content</option>
							</select>
						</label>
					</fieldset>
				</div>
				<fieldset id="image_save_opts">
					<legend id="includedImages">
						Included Images
					</legend>
					<label>
						<input type="radio" name="image_opt" value="embed" checked="checked"/><span id="image_opt_embed">Embed data (local files)</span>
					</label>
					<label>
						<input type="radio" name="image_opt" value="ref"/><span id="image_opt_ref">Use file reference</span>
					</label>
				</fieldset>
			</fieldset>
		</div>
	</div>
	<div id="svg_prefs">
		<div id="svg_prefs_overlay">
		</div>
		<div id="svg_prefs_container">
			<div id="tool_prefs_back" class="toolbar_button">
				<button id="tool_prefs_save">
					确定
				</button>
				<button id="tool_prefs_cancel">
					取消
				</button>
			</div>
			<fieldset>
				<legend id="svginfo_editor_prefs">
					Editor Preferences
				</legend>
				<label>
					<span id="svginfo_lang">Language:</span>
					<!-- Source: http://en.wikipedia.org/wiki/Language_names -->
					<select id="lang_select">
						<option id="lang_ar" value="ar">U+0627U+0644U+0639U+0631U+0628U+064AU+0629</option>
						<option id="lang_cs" value="cs">U+010CeU+0161tina</option>
						<option id="lang_de" value="de">Deutsch</option>
						<option id="lang_en" value="en" selected="selected">English</option>
						<option id="lang_es" value="es">EspaU+00F1ol</option>
						<option id="lang_fa" value="fa">U+0641U+0627U+0631U+0633U+06CC</option>
						<option id="lang_fr" value="fr">FranU+00E7ais</option>
						<option id="lang_fy" value="fy">Frysk</option>
						<option id="lang_hi" value="hi">&#2361;&#2367;&#2344;&#2381;&#2342;&#2368;, &#2361;&#2367;&#2306;&#2342;&#2368;</option>
						<option id="lang_it" value="it">Italiano</option>
						<option id="lang_ja" value="ja">日本语</option>
						<option id="lang_nl" value="nl">Nederlands</option>
						<option id="lang_pt-BR" value="pt-BR">Português (BR)</option>
						<option id="lang_ro" value="ro">RomU+00E2nU+0103</option>
						<option id="lang_ru" value="ru">Русский</option>
						<option id="lang_sk" value="sk">SlovenU+010Dina</option>
						<option id="lang_zh-TW" value="zh-TW">繁体中文</option>
					</select>
				</label>
				<label>
					<span id="svginfo_icons">Icon size:</span>
					<select id="iconsize">
						<option id="icon_small" value="s">Small</option>
						<option id="icon_medium" value="m" selected="selected">Medium</option>
						<option id="icon_large" value="l">Large</option>
						<option id="icon_xlarge" value="xl">Extra Large</option>
					</select>
				</label>
				<fieldset id="change_background">
					<legend id="svginfo_change_background">
						Editor Background
					</legend>
					<div id="bg_blocks">
					</div>
					<label>
						<span id="svginfo_bg_url">URL:</span>
						<input type="text" id="canvas_bg_url"/>
					</label>
					<p id="svginfo_bg_note">
						注:背景不会被保存图像
					</p>
				</fieldset>
				<fieldset id="change_grid">
					<legend id="svginfo_grid_settings">
						网格
					</legend>
					<label>
						<span id="svginfo_snap_onoff">开/关</span>
						<input type="checkbox" value="snapping_on" id="grid_snapping_on">
					</label>
					<label>
						<span id="svginfo_snap_step">Snapping Step-Size:</span>
						<input type="text" id="grid_snapping_step" size="3" value="10"/>
					</label>
				</fieldset>
				<fieldset id="units_rulers">
					<legend id="svginfo_units_rulers">
						Units & Rulers
					</legend>
					<label>
						<span id="svginfo_rulers_onoff">Show rulers</span>
						<input type="checkbox" value="show_rulers" id="show_rulers" checked>
					</label>
					<label>
						<span id="svginfo_unit">Base Unit:</span>
						<select id="base_unit">
							<option value="px">Pixels</option>
							<option value="cm">Centimeters</option>
							<option value="mm">Millimeters</option>
							<option value="in">Inches</option>
							<option value="pt">Points</option>
							<option value="pc">Picas</option>
							<option value="em">Ems</option>
							<option value="ex">Exs</option>
						</select>
					</label>
				</fieldset>
			</fieldset>
		</div>
	</div>
	<div id="dialog_box">
		<div id="dialog_box_overlay">
		</div>
		<div id="dialog_container">
			<div id="dialog_content">
			</div>
			<div id="dialog_buttons">
			</div>
		</div>
	</div>
	<ul id="cmenu_canvas" class="contextMenu">
		<li>
			<a id="ID_modifyPoiInfo" href="#modifyPoiInfo">修改POI信息</a>
		</li>
		<li class="separator">
			<a href="#cut">剪切</a>
		</li>
		<li>
			<a href="#copy">复制</a>
		</li>
		<li>
			<a href="#paste">粘贴</a>
		</li>
		<li>
			<a href="#paste_in_place">原位粘贴</a>
		</li>
		<li class="separator">
			<a href="#delete">删除</a>
		</li>
		<li class="separator" style="display:none">
			<a href="#group">组合<span class="shortcut">G</span></a>
		</li>
		<li style="display:none">
			<a href="#ungroup">取消组合<span class="shortcut">G</span></a>
		</li>
		<li class="separator">
			<a href="#move_front">移到顶层<span class="shortcut">SHFT+CTRL+]</span></a>
		</li>
		<li>
			<a href="#move_up">上移一层<span class="shortcut">CTRL+]</span></a>
		</li>
		<li>
			<a href="#move_down">下移一层<span class="shortcut">CTRL+[</span></a>
		</li>
		<li>
			<a href="#move_back">移到底层<span class="shortcut">SHFT+CTRL+[</span></a>
		</li>
	</ul>
	<ul id="cmenu_layers" class="contextMenu">
		<li>
			<a href="#dupe">复制图层</a>
		</li>
		<li>
			<a href="#delete">删除图层</a>
		</li>
		<li>
			<a href="#merge_down">合并到下一层</a>
		</li>
		<li>
			<a href="#merge_all">合并所有图层</a>
		</li>
	</ul>
	<!--引入-->
</div>
<div id="svgeditbgdiv" style=" width:100%;position:static;">
</div>
<div id="popupbgdiv" style="display:none;">
</div>
<div id="popuppoidiv" align="center" style="display:none; background-color:#ffffff" class="divPopup">
	{literal}
	<script language="javascript" type="text/javascript">
        function checkFormPoi(){
            var re_kong = /^\s*$/;
            var re_POI_PHONE = /^(([0-9]+(\-[0-9]+)*)|(((\([0-9]{3,4}\))|([0-9]{3,4}\-))?[0-9]{7,8}))$/;
            if ($('#POI_NAME').val() == '' || re_kong.test($('#POI_NAME').val())) {
                alert('POI名称不能为空,最多64个字符！');
                $('#POI_NAME').focus();
                return false;
            }
            if ($('#POI_NAME').val() == '') {
                alert('POI名称不能为空,最多64个字符！');
                $('#POI_NAME').focus();
                return false;
            }
            if ($('#POI_TYPE').val() == '') {
                alert('请选择类别！');
                $('#POI_TYPE').focus();
                return false;
            }
            if ($('#POI_STATUS').val() == '') {
                alert('请选择状态！');
                $('#POI_STATUS').focus();
                return false;
            }
            if ($('#POI_TYPE').val() == "ANTS") {
                {
                    var reg = new RegExp("^[0-9]{5}$");
                    {
                        var ANT_LAC = $('#ANT_LAC').val();
                        if (ANT_LAC == '') {
                            alert('请输入室内天线LAC！');
                            $('#ANT_LAC').focus();
                            return (false);
                        }
                        else {
                            if (!reg.test(ANT_LAC)) {
                                alert("输入的LAC不正确！");
                                $('#ANT_LAC').focus();
                                return (false);
                            }
                        }
                    }
                    {
                        var ANT_CID = $('#ANT_CID').val();
                        if (ANT_CID == '') {
                            alert('请输入室内天线CID！');
                            $('#ANT_CID').focus();
                            return (false);
                        }
                        else {
                            if (!reg.test(ANT_CID)) {
                                alert("输入的CID不正确！");
                                $('#ANT_CID').focus();
                                return (false);
                            }
                        }
                    }
                }
                {
                    var reg = new RegExp("^[0-9]{1,2}$");
                    {
                        var ANT_POWER = $('#ANT_POWER').val();
                        if (ANT_POWER == '') {
                            alert('请输入室内天线发射功率！');
                            $('#ANT_POWER').focus();
                            return (false);
                        }
                        else {
                            if (!reg.test(ANT_POWER)) {
                                alert("输入的发射功率不正确！");
                                $('#ANT_POWER').focus();
                                return (false);
                            }
                        }
                    }
                }
                if ($('#ANT_FREQUENCY').val() == '') {
                    alert('请选择室内天线频率！');
                    $('#ANT_FREQUENCY').focus();
                    return (false);
                }
            }
            if ($('#POI_PHONE').val() != '' && !re_POI_PHONE.test($('#POI_PHONE').val())) {
                alert('请填写正确电话号码格式（如020-33333333）！');
                $('#POI_PHONE').focus();
                return false;
            }
            if ($('#POI_NOTE').val() == '' || re_kong.test($('#POI_NOTE').val())) {
                alert('POI简介不能为空！');
                $('#POI_NOTE').focus();
                return false;
            }
            return true;
        }

        function savePoi(){
            if (checkFormPoi()) {
                var POI_TYPE = $('#POI_TYPE').val();
                env.PoiFormListJson[env.elementId] = {
                    "POI_NAME": $('#POI_NAME').val(),
                    "POI_TYPE": POI_TYPE,
                    "POI_NOTE": $('#POI_NOTE').val(),
                    "NOTE": $('#POI_REMARK').val(),
                    "STATUS": $('#POI_STATUS').val(),
                    "ADDRESS": $('#POI_ADDRESS').val(),
                    "PHONE": $('#POI_PHONE').val(),
                    "ANT_FREQUENCY": ((POI_TYPE == "ANTS") ? $('#ANT_FREQUENCY').val() : ""),
                    "ANT_POWER": ((POI_TYPE == "ANTS") ? $('#ANT_POWER').val() : ""),
                    "ANT_LAC": ((POI_TYPE == "ANTS") ? $('#ANT_LAC').val() : ""),
                    "ANT_CID": ((POI_TYPE == "ANTS") ? $('#ANT_CID').val() : "")
                };
                hidePoiInfo();
                var inputFileName = env.elementId;
                var inputFile = $("#inputFileName" + inputFileName);
                if ((inputFile.length > 0) && (inputFile.val() != "")) {
                    if (env.SvgPicListJson[env.elementId] == null) {
                        env.SvgPicListJson[env.elementId] = {};
                    }
                    env.SvgPicListJson[env.elementId]["NEW_PIC"] = inputFileName;
                }
            }
        }

        function onUploadImgChange(sender){
            var file = sender.files[0];
            if (file.type.indexOf("image") != -1) {
                return true;
            }
            else {
                alert('图片格式无效！');
                sender.value = "";
                removeSvgNewPic();
                return false;
            }
        }

        function checkPoiType(){
            var ANT_NEEDFILL = $(".ANT_NEEDFILL");
            if (ANT_NEEDFILL) {
                var poi_type = $("#POI_TYPE").val();
                if (poi_type == "ANTS") {
                    ANT_NEEDFILL.css("display", "");
                }
                else {
                    ANT_NEEDFILL.css("display", "none");
                }
            }
        }
	</script>
	{/literal}
	<div style="width: 688px;" class="popup">
		<div class="p-box">
			<div style="cursor: move;" class="p-title" id="drag_handler">
				<div id="POIINFO_TITLE" class="p-title-content">
					添加POI信息
				</div>
				<span><a style="cursor: pointer; background-position: 0px 0px;" href="#" onclick="closePoiInfo();" class="pop_Content_close jqmClose" title="关闭">关闭</a></span>
			</div>
			<div class="p-main clear">
				<div style="display: none;" class="content">
				</div>
				<div>
					<div id="u312" class="u312_container" border="1">
						<table width="100%" id="add" border="2" cellspacing="1" cellpadding="4" bordercolor="#FFFFFF" bgcolor="" align="center" frame="box">
							<tr>
								<td>
									<table width="100%" id="add" border="0" cellspacing="1" cellpadding="4" bordercolor="#FFFFFF" bgcolor="" align="center" frame="box">
										<tr height="0px">
											<td width="12%">
											</td>
											<td width="12%">
											</td>
											<td width="12%">
											</td>
											<td width="12%">
											</td>
											<td width="12%">
											</td>
											<td width="12%">
											</td>
											<td width="12%">
											</td>
											<td width="12%">
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												POI名称:
											</td>
											<td align="left" style="border: 0px; height: 40px;" colspan="7">
												<input name="POI_NAME" type="text" id="POI_NAME" maxlength="64" value="" style="height: 20px;width:96%"/>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												类别:
											</td>
											<td align="left" style="border:0px;font-size:14px;height:40px;" colspan="3">
												<select style="height:20px;width:92.5%" name="POI_TYPE" id="POI_TYPE" style="height: 22px;" onchange="checkPoiType();">
													<option selected="" value="">--请选择--</option>
													{html_options options=$POI_TYPE}
												</select>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												状态:
											</td>
											<td align="left" style="border:0px;font-size:14px;height:40px;" colspan="3">
												<select style="height:20px;width:92.8%" id="POI_STATUS" style="height: 22px;" value="">
													<option selected="" value="">--请选择--</option>
													{html_options options=$POI_STATUS}
												</select>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
										</tr>
										<tr style="display:none" class="ANT_NEEDFILL">
											<td style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												LAC:
											</td>
											<td colspan="3">
												<input name="ANT_LAC" type="text" id="ANT_LAC" maxlength="5" value="" style="height: 20px;width:90%;"/>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
											<td style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												CID:
											</td>
											<td colspan="3">
												<input name="ANT_CID" type="text" id="ANT_CID" maxlength="5" value="" style="height: 20px;width:90%;"/>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
										</tr>
										<tr style="display:none" class="ANT_NEEDFILL">
											<td style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												功 率:
											</td>
											<td colspan="3">
												<input name="ANT_POWER" type="text" id="ANT_POWER" maxlength="2" value="" style="height: 20px;width:90%;"/>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
											<td style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												频率:
											</td>
											<td colspan="3">
												<select style="height:20px;width:92.4%" name="ANT_FREQUENCY" id="ANT_FREQUENCY" style="height: 22px;">
													<option selected="" value="">--请选择--</option>
													{html_options options=$ANT_FREQUENCYS}
												</select>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												电话:
											</td>
											<td align="left" style="border:0px;font-size:14px;height:40px;" colspan="3">
												<input type="text" id="POI_PHONE" name="POI_PHONE" maxlength="256" style="height:20px;width:90%" value="" />
											</td>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												<span id="uploadpoipic"></span>
											</td>
											<td align="left" style="border:0px;height:40px;" colspan="3">
												<form id="SELECTIMAGEFORM" name="SELECTIMAGEFORM" method="post" enctype="multipart/form-data">
                                                    <textarea id="PARAMSJSON" name="PARAMSJSON" style="display:none;">
                                                    </textarea>
												</form>
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												详细地址:
											</td>
											<td align="left" style="border:0px;font-size:14px;height:40px;" colspan="7">
												<input type="text" id="POI_ADDRESS" name="POI_ADDRESS" maxlength="128" value="" style="height:20px;width:95.5%;"/>
											</td>
										</tr>
										<tr valign="top">
											<td valign="top" align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												介绍说明:
											</td>
											<td valign="top" align="left" style="border:0px;font-size:14px;height:40px;" colspan="7">
												<div class="cl_tit">
                                                    <textarea id="POI_NOTE" rows="1" cols="2" style="overflow-y:scroll;height:45px;width:96%;font-size:14px;border:1px #ccc solid;">
                                                    </textarea>
													<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
														*
													</font>
												</div>
											</td>
										</tr>
										<tr>
											<td width="7%" valign="top" align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												备注:
											</td>
											<td align="left" style="border:0px;font-size:14px;height:40px;" colspan="7">
												<div class="cl_tit">
                                                    <textarea id="POI_REMARK" rows="1" cols="2" style="overflow-y:scroll;height:45px;width:96%;font-size:14px;border:1px #ccc solid;">
                                                    </textarea>
												</div>
											</td>
										</tr>
									</table>
									<table style="height:30px;" width="100%">
										<tr>
											<td width="40%" align="right">
												<input type="button" name="button" id="button" onclick="savePoi()" value="确定" valign="center"/>
											</td>
											<td width="5%">
											</td>
											<td width="40%" align="left">
												<input id="POI_RESET" type="button" value="重设" valign="center" onclick="resetPoiInfo()"/>
											</td>
										</tr>
									</table>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
			<div class="p-bom clear">
			</div>
		</div>
	</div>
</div>
<div id="popupapdiv" align="center" style="display:none; background-color:#ffffff" class="divPopup">
	{literal}
	<script language="javascript" type="text/javascript">
        function checkFormAp(){
            var re_kong = /^\s*$/;
            var re_MAC_BSSID = /^(([a-fA-F\d]{2}:[a-fA-F\d]{2}:[a-fA-F\d]{2}:[a-fA-F\d]{2}:[a-fA-F\d]{2}:[a-fA-F\d]{2})|([a-fA-F\d]{2}-[a-fA-F\d]{2}-[a-fA-F\d]{2}-[a-fA-F\d]{2}-[a-fA-F\d]{2}-[a-fA-F\d]{2}))$/;
            var re_POSITION_X = /^([0-9]{1,4})(\.[0-9]+?)?$/;
            var re_POSITION_Y = /^([0-9]{1,4})(\.[0-9]+?)?$/;
            var re_FREQUENCY = /^[0-9]{1,5}$/;
            var re_CHANNEL = /^[0-9]{1,5}$/;
            if ($('#AP_EQUT_SSID').val() == '' || re_kong.test($('#AP_EQUT_SSID').val())) {
                alert('设备别名不能为空！');
                $('#AP_EQUT_SSID').focus();
                return false;
            }
            if ($('#AP_EQUT_TYPE').val() == '') {
                alert('请选择类别！');
                $('#AP_EQUT_TYPE').focus();
                return false;
            }
            if ($('#AP_STATUS').val() == '') {
                alert('请选择状态！');
                $('#AP_STATUS').focus();
                return false;
            }
            if ($('#AP_MAC_BSSID').val() == '' || !re_MAC_BSSID.test($('#AP_MAC_BSSID').val()) || re_kong.test($('#AP_MAC_BSSID').val())) {
                alert('MAC不能为空，由数字和大小写英文字母（a-f）及冒号或“-”组成（格式一般为c4:ca:d9:59:93:30或c4-ca-d9-59-93-30）！');
                $('#AP_MAC_BSSID').focus();
                return false;
            }
            if (($('#AP_FREQUENCY').val() != '' && !re_FREQUENCY.test($('#AP_FREQUENCY').val())) || ($('#AP_FREQUENCY').val() != '' && $('#AP_FREQUENCY').val() == 0)) {
                alert('频率最多为5位数字,不能为0！');
                $('#AP_FREQUENCY').focus();
                return false;
            }
            if (($('#AP_CHANNEL').val() != '' && !re_CHANNEL.test($('#AP_CHANNEL').val())) || ($('#AP_CHANNEL').val() != '' && $('#AP_CHANNEL').val() == 0)) {
                alert('信道最多为2位数字，不能为0！');
                $('#AP_CHANNEL').focus();
                return false;
            }
            return true;
        }

        function saveAp(){
            if (checkFormAp()) {
                env.ApFormListJson[env.elementId] = {
                    "EQUT_SSID": $("#AP_EQUT_SSID").val(),
                    "MAC_BSSID": $("#AP_MAC_BSSID").val(),
                    "EQUT_TYPE": $("#AP_EQUT_TYPE").val(),
                    "FREQUENCY": $("#AP_FREQUENCY").val(),
                    "CHANNEL": $("#AP_CHANNEL").val(),
                    "FACTORY": $("#AP_FACTORY").val(),
                    "BRANDS": $("#AP_BRANDS").val(),
                    "EQUT_MODEL": $("#AP_EQUT_MODEL").val(),
                    "NOTE": $("#AP_NOTE").val(),
                    "STATUS": $("#AP_STATUS").val()
                };
                hideApInfo();
            }
        }
	</script>
	{/literal}
	<div style="width: 688px;" class="popup">
		<div class="p-box">
			<div style="cursor: move;" class="p-title" id="drag_handler1">
				<div id="APINFO_TITLE" class="p-title-content">
					添加AP信息
				</div>
				<span><a style="cursor: pointer; background-position: 0px 0px;" href="#" onclick="hideApInfo();" class="pop_Content_close jqmClose" title="关闭">关闭</a></span>
			</div>
			<div class="p-main clear">
				<div style="display: none;" class="content">
				</div>
				<div>
					<div id="u312" class="u312_container" border="1">
						<table width="100%" id="add" border="2" cellspacing="1" cellpadding="4" bordercolor="#FFFFFF" bgcolor="" align="center" frame="box">
							<tr>
								<td>
									<table width="100%" id="add" border="0" cellspacing="1" cellpadding="4" bordercolor="#FFFFFF" bgcolor="" align="center" frame="box">
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;" width="12%">
												设备别名:
											</td>
											<td align="left" style="border: 0px; height: 40px;" colspan="3">
												<input name="AP_EQUT_SSID" type="text" id="AP_EQUT_SSID" maxlength="16" value="" style="height: 22px;width:95%"/>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												厂家:
											</td>
											<td align="left" style="border: 0px; height: 40px;">
												<select style="height:20px;width:90%" name="AP_FACTORY" id="AP_FACTORY" class="u279" style="width: 50px;">
													<option selected="" value="">-请选择-</option>
													{html_options options=$EQUT_FACTORY}
												</select>
											</td>
											<td width="17%" align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												品牌:
											</td>
											<td align="left" style="border: 0px; height: 40px;" colspan="2">
												<select style="height:20px;width:90%" name="AP_BRANDS" id="AP_BRANDS" style="height: 22px;">
													<option selected="" value="">-请选择-</option>
													{html_options options=$EQUT_BRANDS}
												</select>
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												类别:
											</td>
											<td align="left" style="border: 0px; height: 40px;">
												<select style="height:20px;width:90%" name="AP_EQUT_TYPE" id="AP_EQUT_TYPE" style="height: 22px;">
													<option selected="" value="">-请选择-</option>
													{html_options options=$EQUT_TYPE}>
												</select>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												状态:
											</td>
											<td align="left" style="border: 0px; height: 40px;" colspan="2">
												<select style="height:20px;width:90%" name="AP_STATUS" id="AP_STATUS" style="height: 22px;">
													<option selected="" value="">-请选择-</option>
													{html_options options=$EQUT_STATUS}>
												</select>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												设备型号:
											</td>
											<td align="left" style="border:0px;font-size:14px;height:40px;" colspan="3">
												<input name="AP_EQUT_MODEL" type="text" id="AP_EQUT_MODEL" maxlength="64" value="" style="height:20px;width:95%"/>
											</td>
										</tr>
										<tr>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												MAC地址:
											</td>
											<td align="left" style="border:0px;font-size:14px;height:40px;" colspan="3">
												<input name="AP_MAC_BSSID" type="text" id="AP_MAC_BSSID" maxlength="20" value="" style="height:20px;width:95%"/>
												<font style="font-size:14px;font-style:normal;text-decoration:none;color:red;">
													*
												</font>
											</td>
										</tr>
										<tr>
											<td width="7%" align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												频率:
											</td>
											<td style="border: 0px; height: 40px;">
												<input name="AP_FREQUENCY" type="text" id="AP_FREQUENCY" maxlength="5" value="" style="height:20px;width:90%"/>
											</td>
											<td align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												信道:
											</td>
											<td align="left">
												<input name="AP_CHANNEL" type="text" id="AP_CHANNEL" maxlength="2" value="" style="height:20px;width:88%"/>
											</td>
										</tr>
										<tr>
											<td width="7%" valign="top" align="left" style="font-family:Arial;font-size:14px;font-style:normal;text-decoration:none;color:#333333;">
												说明:
											</td>
											<td align="left" style="border:0px;font-size:18px;height:40px;" colspan="5">
												<div class="cl_tit">
                                                    <textarea name="AP_NOTE" id="AP_NOTE" rows="1" cols="2" style="overflow-y:scroll;font-size:14px;height:45px;width:96%;border:1px #ccc solid;">
                                                    </textarea>
												</div>
											</td>
										</tr>
									</table>
									<table style="height:30px;" width="100%">
										<tr>
											<td width="40%" align="right">
												<input type="button" onclick="saveAp();" value="保存" valign="center"/>
											</td>
											<td width="5%">
											</td>
											<td width="40%" align="left">
												<input id="POI_RESET" type="button" value="重设" valign="center" onclick="resetApInfo()"/>
											</td>
										</tr>
									</table>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
			<div class="p-bom clear">
			</div>
		</div>
	</div>
</div>
</body>
</html>

